{% extends "base.html" %}

{% block content %}
<div class="season-overview">
    <h1>{{ season.name }}</h1>
    <div class="stats-container">
        <h2>Current Ranking</h2>
        <table>
            <tr>
                <th>Rank</th>
                <th>Player</th>
                <th>Matches</th>
                <th>Wins</th>
                <th>Kills</th>
                <th>Deaths</th>
                <th>Assists</th>
                <th>K/D Ratio</th>
                <th>Win Rate</th>
            </tr>
            {% for player in ranked_players %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td><a href="{% url 'cs_player_profile' player_id=player.id %}">{{ player.name }}</a></td>
                <td>{{ player.matchCount }}</td>
                <td>{{ player.winCount }}</td>
                <td>{{ player.kills }}</td>
                <td>{{ player.deaths }}</td>
                <td>{{ player.assists }}</td>
                <td>{{ player.kd_ratio }}</td>
                <td>{{ player.win_rate }}%</td>
            </tr>
            {% if not forloop.last %}
            <tr class="separator">
                <td colspan="9"></td>
            </tr>
            {% endif %}
            {% endfor %}
        </table>

        <h2>Unranked Players</h2>
        <table>
            <tr>
                <th>Player</th>
                <th>Matches</th>
                <th>Wins</th>
                <th>Kills</th>
                <th>Deaths</th>
                <th>Assists</th>
                <th>K/D Ratio</th>
                <th>Win Rate</th>
            </tr>
            {% for player in unranked_players %}
            <tr>
                <td><a href="{% url 'cs_player_profile' player_id=player.id %}">{{ player.name }}</a></td>
                <td>{{ player.matchCount }}</td>
                <td>{{ player.winCount }}</td>
                <td>{{ player.kills }}</td>
                <td>{{ player.deaths }}</td>
                <td>{{ player.assists }}</td>
                <td>{{ player.kd_ratio }}</td>
                <td>{{ player.win_rate }}%</td>
            </tr>
            {% if not forloop.last %}
            <tr class="separator">
                <td colspan="8"></td>
            </tr>
            {% endif %}
            {% endfor %}
        </table>

        <h2>Matches</h2>
        <table>
            <tr>
                <th>Date</th>
                <th>Map</th>
                <th>Score</th>
            </tr>
            {% for match in matches %}
            <tr>
                <td>{{ match.date|date:"Y-m-d H:i" }}</td>
                <td>{{ match.map }}</td>
                <td><a href="{% url 'cs_match_overview' match_id=match.id %}">View Details</a></td>
            </tr>
            {% if not forloop.last %}
            <tr class="separator">
                <td colspan="3"></td>
            </tr>
            {% endif %}
            {% endfor %}
        </table>
    </div>
</div>
{% endblock %}